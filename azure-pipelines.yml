# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master
- develop

pool:
  vmImage: 'ubuntu-latest'

steps:
- script: go build ./apw
  displayName: 'Building apw'
# - script:
#     cd ./archive
#     go get -d
#     go build
#     cd ..
#   displayName: 'Building Archive Helper'
#   Windows Build: env GOOS=windows GOARCH=amd64 go build 

- script: |
    go get -d
    go build
  workingDirectory: './compile'
  displayName: 'Building Compile package'

- script: |
    go get -d
    go build
  workingDirectory: './compile/cli'
  displayName: 'Building Compile CLI Tool'

- script: |
    go get -d
    go build
  workingDirectory: './compile/cloud'
  displayName: 'Building Compile Cloud Function'

- script: |
    go get -d
    go build
  workingDirectory: './ftp'
  displayName: 'Building FTP Helper'

- script: |
    go get -d
    go build
  workingDirectory: './studio'
  env:
    GOOS: 'windows'
    GOARCH: 'amd64'
  displayName: 'Building Studio Helper'
